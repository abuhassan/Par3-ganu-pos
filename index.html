<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Par3-ganu POS System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }
        .btn {
            transition: all 0.2s;
        }
        .btn:hover {
            transform: scale(1.05);
        }
        .cart-item {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>

    <script>
        class Par3GanuPOS {
            constructor() {
                this.currentUser = '';
                this.cart = [];
                this.sales = JSON.parse(localStorage.getItem('par3-ganu-sales') || '[]');
                this.ballBucketPrice = parseFloat(localStorage.getItem('par3-ganu-price') || '15.00');
                this.showLogin = true;
                this.showSettings = false;
                this.showSalesHistory = false;
                this.adminUsers = ['Anis', 'Azhar', 'Tam'];
                
                this.init();
            }

            init() {
                this.render();
            }

            saveSales() {
                localStorage.setItem('par3-ganu-sales', JSON.stringify(this.sales));
            }

            savePrice() {
                localStorage.setItem('par3-ganu-price', this.ballBucketPrice.toString());
            }

            handleLogin(user) {
                this.currentUser = user;
                this.showLogin = false;
                this.render();
            }

            addToCart() {
                const existingItem = this.cart.find(item => item.id === 'range-balls');
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.cart.push({
                        id: 'range-balls',
                        name: 'Range Ball Bucket',
                        price: this.ballBucketPrice,
                        quantity: 1
                    });
                }
                this.render();
            }

            updateQuantity(id, change) {
                this.cart = this.cart.map(item => {
                    if (item.id === id) {
                        const newQuantity = item.quantity + change;
                        if (newQuantity <= 0) return null;
                        return { ...item, quantity: newQuantity };
                    }
                    return item;
                }).filter(Boolean);
                this.render();
            }

            removeFromCart(id) {
                this.cart = this.cart.filter(item => item.id !== id);
                this.render();
            }

            getTotal() {
                return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            }

            processPayment(paymentType) {
                if (this.cart.length === 0) return;

                const total = this.getTotal();
                const newSale = {
                    id: Date.now().toString(),
                    items: [...this.cart],
                    total: total,
                    paymentType,
                    staff: this.currentUser,
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString()
                };

                this.sales.unshift(newSale);
                this.saveSales();
                this.cart = [];
                
                alert(`‚úÖ Sale Completed!\\n\\nTotal: RM ${total.toFixed(2)}\\nPayment: ${paymentType}\\nStaff: ${this.currentUser}`);
                this.render();
            }

            clearCart() {
                this.cart = [];
                this.render();
            }

            getDailyTotals() {
                const today = new Date().toLocaleDateString();
                const todaySales = this.sales.filter(sale => sale.date === today);
                
                return {
                    totalSales: todaySales.length,
                    totalRevenue: todaySales.reduce((sum, sale) => sum + sale.total, 0),
                    qrPayments: todaySales.filter(sale => sale.paymentType === 'QR').length,
                    cashPayments: todaySales.filter(sale => sale.paymentType === 'Cash').length
                };
            }

            render() {
                const app = document.getElementById('app');
                
                if (this.showLogin) {
                    app.innerHTML = this.renderLogin();
                } else if (this.showSettings) {
                    app.innerHTML = this.renderSettings();
                } else if (this.showSalesHistory) {
                    app.innerHTML = this.renderSalesHistory();
                } else {
                    app.innerHTML = this.renderPOS();
                }
            }

            renderLogin() {
                return `
                    <div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-8">
                        <div class="bg-white rounded-2xl shadow-2xl p-12 w-full max-w-lg">
                            <div class="text-center mb-12">
                                <h1 class="text-5xl font-bold text-green-800 mb-4">üèåÔ∏è Par3-ganu</h1>
                                <p class="text-gray-600 text-xl">Golf Range POS System</p>
                                <p class="text-gray-400 text-sm mt-2">Version 1.0 ‚Ä¢ Professional Edition</p>
                            </div>
                            
                            <div class="space-y-6">
                                <h2 class="text-2xl font-semibold text-center mb-8">Select User</h2>
                                ${this.adminUsers.map(user => `
                                    <button onclick="pos.handleLogin('${user}')" 
                                            class="w-full bg-green-600 text-white py-6 px-8 rounded-xl hover:bg-green-700 transition-colors font-medium text-xl shadow-lg hover:shadow-xl btn">
                                        ${user}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSettings() {
                return `
                    <div class="min-h-screen bg-gray-50 p-8">
                        <div class="max-w-4xl mx-auto">
                            <div class="bg-white rounded-2xl shadow-xl p-8">
                                <div class="flex justify-between items-center mb-8">
                                    <h2 class="text-3xl font-bold text-gray-800">Settings</h2>
                                    <button onclick="pos.showSettings = false; pos.render()" 
                                            class="bg-gray-500 text-white px-8 py-4 rounded-xl hover:bg-gray-600 text-lg font-medium btn">
                                        Back to POS
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div class="bg-gray-50 rounded-xl p-6">
                                        <label class="block text-lg font-medium text-gray-700 mb-4">
                                            Range Ball Bucket Price (RM)
                                        </label>
                                        <input type="number" step="0.01" value="${this.ballBucketPrice}" 
                                               onchange="pos.ballBucketPrice = parseFloat(this.value); pos.savePrice()"
                                               class="w-full px-6 py-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 text-2xl font-medium">
                                    </div>
                                    
                                    <div class="bg-gray-50 rounded-xl p-6">
                                        <h3 class="text-lg font-semibold mb-4">Current User</h3>
                                        <p class="text-gray-600 text-xl mb-6">${this.currentUser}</p>
                                        <button onclick="pos.showLogin = true; pos.showSettings = false; pos.render()" 
                                                class="w-full bg-red-500 text-white px-6 py-4 rounded-xl hover:bg-red-600 font-medium text-lg btn">
                                            Switch User
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderSalesHistory() {
                const dailyTotals = this.getDailyTotals();
                
                return `
                    <div class="min-h-screen bg-gray-50 p-8">
                        <div class="max-w-6xl mx-auto">
                            <div class="bg-white rounded-2xl shadow-xl p-8">
                                <div class="flex justify-between items-center mb-8">
                                    <h2 class="text-3xl font-bold text-gray-800">Sales History</h2>
                                    <button onclick="pos.showSalesHistory = false; pos.render()" 
                                            class="bg-gray-500 text-white px-8 py-4 rounded-xl hover:bg-gray-600 text-lg font-medium btn">
                                        Back to POS
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                                    <div class="bg-green-100 p-6 rounded-xl text-center">
                                        <div class="text-4xl font-bold text-green-800">${dailyTotals.totalSales}</div>
                                        <div class="text-green-600 text-lg">Total Sales Today</div>
                                    </div>
                                    <div class="bg-blue-100 p-6 rounded-xl text-center">
                                        <div class="text-4xl font-bold text-blue-800">RM ${dailyTotals.totalRevenue.toFixed(2)}</div>
                                        <div class="text-blue-600 text-lg">Revenue Today</div>
                                    </div>
                                    <div class="bg-purple-100 p-6 rounded-xl text-center">
                                        <div class="text-4xl font-bold text-purple-800">${dailyTotals.qrPayments}</div>
                                        <div class="text-purple-600 text-lg">QR Payments</div>
                                    </div>
                                    <div class="bg-yellow-100 p-6 rounded-xl text-center">
                                        <div class="text-4xl font-bold text-yellow-800">${dailyTotals.cashPayments}</div>
                                        <div class="text-yellow-600 text-lg">Cash Payments</div>
                                    </div>
                                </div>
                                
                                <div class="space-y-4 max-h-96 overflow-y-auto">
                                    ${this.sales.length === 0 ? 
                                        '<div class="text-center py-12 text-gray-500">No sales recorded yet</div>' :
                                        this.sales.map(sale => `
                                            <div class="border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow">
                                                <div class="flex justify-between items-start">
                                                    <div>
                                                        <div class="font-medium text-lg">Sale #${sale.id.slice(-6)}</div>
                                                        <div class="text-gray-500">${sale.date} at ${sale.time}</div>
                                                        <div class="text-gray-600">Staff: ${sale.staff}</div>
                                                    </div>
                                                    <div class="text-right">
                                                        <div class="text-2xl font-bold text-green-600">RM ${sale.total.toFixed(2)}</div>
                                                        <div class="text-gray-500 text-lg">${sale.paymentType}</div>
                                                    </div>
                                                </div>
                                                <div class="mt-4 text-gray-600">
                                                    ${sale.items.map(item => `
                                                        <div class="text-lg">${item.quantity}x ${item.name} @ RM ${item.price.toFixed(2)}</div>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        `).join('')
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderPOS() {
                const dailyTotals = this.getDailyTotals();
                
                return `
                    <div class="min-h-screen bg-gray-50 p-8">
                        <div class="max-w-7xl mx-auto">
                            <!-- Header -->
                            <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h1 class="text-4xl font-bold text-green-800">üèåÔ∏è Par3-ganu POS</h1>
                                        <p class="text-gray-600 text-xl">Welcome back, ${this.currentUser}</p>
                                    </div>
                                    <div class="flex space-x-4">
                                        <button onclick="pos.showSalesHistory = true; pos.render()" 
                                                class="bg-blue-500 text-white px-8 py-4 rounded-xl hover:bg-blue-600 flex items-center space-x-3 text-lg font-medium shadow-lg hover:shadow-xl btn">
                                            <span>üìä</span>
                                            <span>Sales History</span>
                                        </button>
                                        <button onclick="pos.showSettings = true; pos.render()" 
                                                class="bg-gray-500 text-white px-8 py-4 rounded-xl hover:bg-gray-600 flex items-center space-x-3 text-lg font-medium shadow-lg hover:shadow-xl btn">
                                            <span>‚öôÔ∏è</span>
                                            <span>Settings</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <!-- Products -->
                                <div class="lg:col-span-2">
                                    <div class="bg-white rounded-2xl shadow-xl p-8">
                                        <h2 class="text-2xl font-semibold mb-6">Products</h2>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div onclick="pos.addToCart()" 
                                                 class="border-2 border-gray-200 rounded-xl p-6 hover:bg-gray-50 cursor-pointer hover:border-green-300 transition-all duration-200 shadow-md hover:shadow-lg">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        <h3 class="font-medium text-xl">Range Ball Bucket</h3>
                                                        <p class="text-gray-500">Standard size bucket</p>
                                                    </div>
                                                    <div class="text-right">
                                                        <div class="text-2xl font-bold text-green-600">RM ${this.ballBucketPrice.toFixed(2)}</div>
                                                        <button class="bg-green-500 text-white px-6 py-3 rounded-xl text-lg hover:bg-green-600 mt-2 shadow-md hover:shadow-lg btn">
                                                            ‚ûï Add to Cart
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Cart -->
                                <div>
                                    <div class="bg-white rounded-2xl shadow-xl p-8">
                                        <h2 class="text-2xl font-semibold mb-6">Current Sale</h2>
                                        
                                        ${this.cart.length === 0 ? `
                                            <div class="text-center py-12">
                                                <p class="text-gray-500 text-xl">Cart is empty</p>
                                                <p class="text-gray-400 mt-2">Add items to start a sale</p>
                                            </div>
                                        ` : `
                                            <div class="space-y-6">
                                                ${this.cart.map(item => `
                                                    <div class="bg-gray-50 rounded-xl p-4 cart-item">
                                                        <div class="flex justify-between items-start mb-4">
                                                            <div>
                                                                <div class="font-medium text-lg">${item.name}</div>
                                                                <div class="text-gray-500">RM ${item.price.toFixed(2)} each</div>
                                                            </div>
                                                            <button onclick="pos.removeFromCart('${item.id}')" 
                                                                    class="bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 btn">
                                                                üóëÔ∏è
                                                            </button>
                                                        </div>
                                                        <div class="flex items-center justify-center space-x-4">
                                                            <button onclick="pos.updateQuantity('${item.id}', -1)" 
                                                                    class="bg-red-500 text-white p-3 rounded-lg hover:bg-red-600 shadow-md btn">
                                                                ‚ûñ
                                                            </button>
                                                            <span class="text-2xl font-bold w-12 text-center">${item.quantity}</span>
                                                            <button onclick="pos.updateQuantity('${item.id}', 1)" 
                                                                    class="bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 shadow-md btn">
                                                                ‚ûï
                                                            </button>
                                                        </div>
                                                    </div>
                                                `).join('')}
                                                
                                                <div class="border-t pt-6">
                                                    <div class="flex justify-between items-center text-3xl font-bold mb-6">
                                                        <span>Total:</span>
                                                        <span class="text-green-600">RM ${this.getTotal().toFixed(2)}</span>
                                                    </div>
                                                    
                                                    <div class="space-y-4">
                                                        <button onclick="pos.processPayment('QR')" 
                                                                class="w-full bg-purple-500 text-white py-6 px-6 rounded-xl hover:bg-purple-600 font-medium flex items-center justify-center space-x-3 text-xl shadow-lg hover:shadow-xl btn">
                                                            <span>üì±</span>
                                                            <span>QR Payment</span>
                                                        </button>
                                                        <button onclick="pos.processPayment('Cash')" 
                                                                class="w-full bg-green-500 text-white py-6 px-6 rounded-xl hover:bg-green-600 font-medium flex items-center justify-center space-x-3 text-xl shadow-lg hover:shadow-xl btn">
                                                            <span>üíµ</span>
                                                            <span>Cash Payment</span>
                                                        </button>
                                                        <button onclick="pos.clearCart()" 
                                                                class="w-full bg-gray-500 text-white py-4 px-6 rounded-xl hover:bg-gray-600 text-lg btn">
                                                            Clear Cart
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        `}
                                    </div>
                                    
                                    <!-- Daily Summary -->
                                    <div class="bg-white rounded-2xl shadow-xl p-8 mt-8">
                                        <h3 class="text-xl font-semibold mb-6">Today's Summary</h3>
                                        <div class="space-y-4">
                                            <div class="flex justify-between items-center text-lg">
                                                <span>Sales:</span>
                                                <span class="font-bold text-2xl">${dailyTotals.totalSales}</span>
                                            </div>
                                            <div class="flex justify-between items-center text-lg">
                                                <span>Revenue:</span>
                                                <span class="font-bold text-2xl text-green-600">RM ${dailyTotals.totalRevenue.toFixed(2)}</span>
                                            </div>
                                            <div class="flex justify-between text-gray-600">
                                                <span>QR: ${dailyTotals.qrPayments}</span>
                                                <span>Cash: ${dailyTotals.cashPayments}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Initialize the POS system
        const pos = new Par3GanuPOS();
    </script>
</body>
</html>